<app-header></app-header>
<main>
    <div class="container mt-3">
        <h2 class="mb-4">Manager Requests View</h2>

        <!-- Search Bar -->
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6">
                    <div class="search-container">
                        <input 
                            type="text" 
                            class="form-control search-input" 
                            [(ngModel)]="searchText" 
                            placeholder="Search..." 
                            (input)="onSearchChange()"
                        >
                        <i class="fas fa-search search-icon"></i>
                    </div>
                </div>
            </div>
        </div>

        <!-- Requests Table -->
        <table class="table">
            <thead>
                <tr>
                    <th (click)="changeSorting('id')">Sl.No.</th>
                    <th (click)="changeSorting('employee_name')">Name</th>
                    <th (click)="changeSorting('request_date')">Request Date</th>
                    <th (click)="changeSorting('date_from')">Date From</th>
                    <th (click)="changeSorting('date_to')">Date To</th>
                    <th (click)="changeSorting('location')">Location</th>
                    <th (click)="changeSorting('status')">Status</th>
                    <th>Action</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let request of travelRequests; let i = index">
                    <td>{{ (currentPage - 1) * requestsPerPage + i + 1 }}</td>
                    <td>{{ request.employee_name }}</td>
                    <td>{{ request.request_date }}</td>
                    <td>{{ request.date_from }}</td>
                    <td>{{ request.date_to }}</td>
                    <td>{{ request.location }}</td>
                    <td>{{ request.status }}</td>
                    <td>
                        <button class="btn btn-primary" (click)="requestMoreInfo(request.id)">Request</button>

                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Pagination -->
        <nav aria-label="Pagination">
            <ul class="pagination">
                <li class="page-item" [class.disabled]="currentPage === 1">
                    <a class="page-link" href="#" (click)="prevPage()">Previous</a>
                </li>
                <li *ngFor="let page of totalPagesArray()" class="page-item" [class.active]="currentPage === page">
                    <a class="page-link" href="#" (click)="goToPage(page)">{{ page }}</a>
                </li>
                <li class="page-item" [class.disabled]="currentPage === totalPages">
                    <a class="page-link" href="#" (click)="nextPage()">Next</a>
                </li>
            </ul>
        </nav>
    </div>
</main>
<app-footer></app-footer>
